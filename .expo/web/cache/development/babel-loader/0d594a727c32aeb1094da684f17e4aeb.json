{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\n\nimport NativeEventEmitter from \"../EventEmitter/NativeEventEmitter\";\nimport logError from \"../Utilities/logError\";\nimport NativeAppState from \"./NativeAppState\";\nimport Platform from \"../Utilities/Platform\";\nvar AppState = function () {\n  function AppState() {\n    var _this = this;\n    _classCallCheck(this, AppState);\n    this.currentState = null;\n    if (NativeAppState == null) {\n      this.isAvailable = false;\n    } else {\n      this.isAvailable = true;\n      var emitter = new NativeEventEmitter(\n      Platform.OS !== 'ios' ? null : NativeAppState);\n      this._emitter = emitter;\n      this.currentState = NativeAppState.getConstants().initialAppState;\n      var eventUpdated = false;\n\n      emitter.addListener('appStateDidChange', function (appStateData) {\n        eventUpdated = true;\n        _this.currentState = appStateData.app_state;\n      });\n\n      NativeAppState.getCurrentAppState(function (appStateData) {\n        if (!eventUpdated && _this.currentState !== appStateData.app_state) {\n          _this.currentState = appStateData.app_state;\n          emitter.emit('appStateDidChange', appStateData);\n        }\n      }, logError);\n    }\n  }\n\n  _createClass(AppState, [{\n    key: \"addEventListener\",\n    value:\n    function addEventListener(type, handler) {\n      var emitter = this._emitter;\n      if (emitter == null) {\n        throw new Error('Cannot use AppState when `isAvailable` is false.');\n      }\n      switch (type) {\n        case 'change':\n          var changeHandler = handler;\n          return emitter.addListener('appStateDidChange', function (appStateData) {\n            changeHandler(appStateData.app_state);\n          });\n        case 'memoryWarning':\n          var memoryWarningHandler = handler;\n          return emitter.addListener('memoryWarning', memoryWarningHandler);\n        case 'blur':\n        case 'focus':\n          var focusOrBlurHandler = handler;\n          return emitter.addListener('appStateFocusChange', function (hasFocus) {\n            if (type === 'blur' && !hasFocus) {\n              focusOrBlurHandler();\n            }\n            if (type === 'focus' && hasFocus) {\n              focusOrBlurHandler();\n            }\n          });\n      }\n      throw new Error('Trying to subscribe to unknown event: ' + type);\n    }\n  }]);\n  return AppState;\n}();\nmodule.exports = new AppState();","map":{"version":3,"names":["NativeEventEmitter","logError","NativeAppState","Platform","AppState","currentState","isAvailable","emitter","OS","_emitter","getConstants","initialAppState","eventUpdated","addListener","appStateData","app_state","getCurrentAppState","emit","type","handler","Error","changeHandler","memoryWarningHandler","focusOrBlurHandler","hasFocus","module","exports"],"sources":["C:/Users/kvnem/ConvergentApp/node_modules/react-native/Libraries/AppState/AppState.js"],"sourcesContent":["/**\r\n * Copyright (c) Meta Platforms, Inc. and affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n * @flow strict-local\r\n * @format\r\n */\r\n\r\nimport {type EventSubscription} from '../vendor/emitter/EventEmitter';\r\nimport NativeEventEmitter from '../EventEmitter/NativeEventEmitter';\r\nimport logError from '../Utilities/logError';\r\nimport NativeAppState from './NativeAppState';\r\nimport Platform from '../Utilities/Platform';\r\n\r\nexport type AppStateValues = 'inactive' | 'background' | 'active';\r\n\r\ntype AppStateEventDefinitions = {\r\n  change: [AppStateValues],\r\n  memoryWarning: [],\r\n  blur: [],\r\n  focus: [],\r\n};\r\n\r\ntype NativeAppStateEventDefinitions = {\r\n  appStateDidChange: [{app_state: AppStateValues}],\r\n  appStateFocusChange: [boolean],\r\n  memoryWarning: [],\r\n};\r\n\r\n/**\r\n * `AppState` can tell you if the app is in the foreground or background,\r\n * and notify you when the state changes.\r\n *\r\n * See https://reactnative.dev/docs/appstate\r\n */\r\nclass AppState {\r\n  currentState: ?string = null;\r\n  isAvailable: boolean;\r\n\r\n  _emitter: ?NativeEventEmitter<NativeAppStateEventDefinitions>;\r\n\r\n  constructor() {\r\n    if (NativeAppState == null) {\r\n      this.isAvailable = false;\r\n    } else {\r\n      this.isAvailable = true;\r\n\r\n      const emitter: NativeEventEmitter<NativeAppStateEventDefinitions> =\r\n        new NativeEventEmitter(\r\n          // T88715063: NativeEventEmitter only used this parameter on iOS. Now it uses it on all platforms, so this code was modified automatically to preserve its behavior\r\n          // If you want to use the native module on other platforms, please remove this condition and test its behavior\r\n          Platform.OS !== 'ios' ? null : NativeAppState,\r\n        );\r\n      this._emitter = emitter;\r\n\r\n      this.currentState = NativeAppState.getConstants().initialAppState;\r\n\r\n      let eventUpdated = false;\r\n\r\n      // TODO: this is a terrible solution - in order to ensure `currentState`\r\n      // prop is up to date, we have to register an observer that updates it\r\n      // whenever the state changes, even if nobody cares. We should just\r\n      // deprecate the `currentState` property and get rid of this.\r\n      emitter.addListener('appStateDidChange', appStateData => {\r\n        eventUpdated = true;\r\n        this.currentState = appStateData.app_state;\r\n      });\r\n\r\n      // TODO: see above - this request just populates the value of `currentState`\r\n      // when the module is first initialized. Would be better to get rid of the\r\n      // prop and expose `getCurrentAppState` method directly.\r\n      // $FlowExpectedError[incompatible-call]\r\n      NativeAppState.getCurrentAppState(appStateData => {\r\n        // It's possible that the state will have changed here & listeners need to be notified\r\n        if (!eventUpdated && this.currentState !== appStateData.app_state) {\r\n          this.currentState = appStateData.app_state;\r\n          emitter.emit('appStateDidChange', appStateData);\r\n        }\r\n      }, logError);\r\n    }\r\n  }\r\n\r\n  // TODO: now that AppState is a subclass of NativeEventEmitter, we could\r\n  // deprecate `addEventListener` and `removeEventListener` and just use\r\n  // addListener` and `listener.remove()` directly. That will be a breaking\r\n  // change though, as both the method and event names are different\r\n  // (addListener events are currently required to be globally unique).\r\n  /**\r\n   * Add a handler to AppState changes by listening to the `change` event type\r\n   * and providing the handler.\r\n   *\r\n   * See https://reactnative.dev/docs/appstate#addeventlistener\r\n   */\r\n  addEventListener<K: $Keys<AppStateEventDefinitions>>(\r\n    type: K,\r\n    handler: (...$ElementType<AppStateEventDefinitions, K>) => void,\r\n  ): EventSubscription {\r\n    const emitter = this._emitter;\r\n    if (emitter == null) {\r\n      throw new Error('Cannot use AppState when `isAvailable` is false.');\r\n    }\r\n    switch (type) {\r\n      case 'change':\r\n        // $FlowIssue[invalid-tuple-arity] Flow cannot refine handler based on the event type\r\n        const changeHandler: AppStateValues => void = handler;\r\n        return emitter.addListener('appStateDidChange', appStateData => {\r\n          changeHandler(appStateData.app_state);\r\n        });\r\n      case 'memoryWarning':\r\n        // $FlowIssue[invalid-tuple-arity] Flow cannot refine handler based on the event type\r\n        const memoryWarningHandler: () => void = handler;\r\n        return emitter.addListener('memoryWarning', memoryWarningHandler);\r\n      case 'blur':\r\n      case 'focus':\r\n        // $FlowIssue[invalid-tuple-arity] Flow cannot refine handler based on the event type\r\n        const focusOrBlurHandler: () => void = handler;\r\n        return emitter.addListener('appStateFocusChange', hasFocus => {\r\n          if (type === 'blur' && !hasFocus) {\r\n            focusOrBlurHandler();\r\n          }\r\n          if (type === 'focus' && hasFocus) {\r\n            focusOrBlurHandler();\r\n          }\r\n        });\r\n    }\r\n    throw new Error('Trying to subscribe to unknown event: ' + type);\r\n  }\r\n}\r\n\r\nmodule.exports = (new AppState(): AppState);\r\n"],"mappings":";;;AAWA,OAAOA,kBAAkB;AACzB,OAAOC,QAAQ;AACf,OAAOC,cAAc;AACrB,OAAOC,QAAQ;AAA8B,IAuBvCC,QAAQ;EAMZ,oBAAc;IAAA;IAAA;IAAA,KALdC,YAAY,GAAY,IAAI;IAM1B,IAAIH,cAAc,IAAI,IAAI,EAAE;MAC1B,IAAI,CAACI,WAAW,GAAG,KAAK;IAC1B,CAAC,MAAM;MACL,IAAI,CAACA,WAAW,GAAG,IAAI;MAEvB,IAAMC,OAA2D,GAC/D,IAAIP,kBAAkB;MAGpBG,QAAQ,CAACK,EAAE,KAAK,KAAK,GAAG,IAAI,GAAGN,cAAc,CAC9C;MACH,IAAI,CAACO,QAAQ,GAAGF,OAAO;MAEvB,IAAI,CAACF,YAAY,GAAGH,cAAc,CAACQ,YAAY,EAAE,CAACC,eAAe;MAEjE,IAAIC,YAAY,GAAG,KAAK;;MAMxBL,OAAO,CAACM,WAAW,CAAC,mBAAmB,EAAE,UAAAC,YAAY,EAAI;QACvDF,YAAY,GAAG,IAAI;QACnB,KAAI,CAACP,YAAY,GAAGS,YAAY,CAACC,SAAS;MAC5C,CAAC,CAAC;;MAMFb,cAAc,CAACc,kBAAkB,CAAC,UAAAF,YAAY,EAAI;QAEhD,IAAI,CAACF,YAAY,IAAI,KAAI,CAACP,YAAY,KAAKS,YAAY,CAACC,SAAS,EAAE;UACjE,KAAI,CAACV,YAAY,GAAGS,YAAY,CAACC,SAAS;UAC1CR,OAAO,CAACU,IAAI,CAAC,mBAAmB,EAAEH,YAAY,CAAC;QACjD;MACF,CAAC,EAAEb,QAAQ,CAAC;IACd;EACF;;EAAC;IAAA;IAAA;IAaD,0BACEiB,IAAO,EACPC,OAA+D,EAC5C;MACnB,IAAMZ,OAAO,GAAG,IAAI,CAACE,QAAQ;MAC7B,IAAIF,OAAO,IAAI,IAAI,EAAE;QACnB,MAAM,IAAIa,KAAK,CAAC,kDAAkD,CAAC;MACrE;MACA,QAAQF,IAAI;QACV,KAAK,QAAQ;UAEX,IAAMG,aAAqC,GAAGF,OAAO;UACrD,OAAOZ,OAAO,CAACM,WAAW,CAAC,mBAAmB,EAAE,UAAAC,YAAY,EAAI;YAC9DO,aAAa,CAACP,YAAY,CAACC,SAAS,CAAC;UACvC,CAAC,CAAC;QACJ,KAAK,eAAe;UAElB,IAAMO,oBAAgC,GAAGH,OAAO;UAChD,OAAOZ,OAAO,CAACM,WAAW,CAAC,eAAe,EAAES,oBAAoB,CAAC;QACnE,KAAK,MAAM;QACX,KAAK,OAAO;UAEV,IAAMC,kBAA8B,GAAGJ,OAAO;UAC9C,OAAOZ,OAAO,CAACM,WAAW,CAAC,qBAAqB,EAAE,UAAAW,QAAQ,EAAI;YAC5D,IAAIN,IAAI,KAAK,MAAM,IAAI,CAACM,QAAQ,EAAE;cAChCD,kBAAkB,EAAE;YACtB;YACA,IAAIL,IAAI,KAAK,OAAO,IAAIM,QAAQ,EAAE;cAChCD,kBAAkB,EAAE;YACtB;UACF,CAAC,CAAC;MAAC;MAEP,MAAM,IAAIH,KAAK,CAAC,wCAAwC,GAAGF,IAAI,CAAC;IAClE;EAAC;EAAA;AAAA;AAGHO,MAAM,CAACC,OAAO,GAAI,IAAItB,QAAQ,EAAa"},"metadata":{},"sourceType":"module"}